import{P as I,S as W,W as Y,a as F,l as g,M as T,I as V,C as X,m as j,n as D,d as H,o as K,V as q,_ as J}from"./three.module.4532a980.js";import{G as N}from"./GLTFLoader.695b33d7.js";import{d as O,o as Q,b as U,e as b}from"./index.1c0582b1.js";function Z(n,o){const t=new I(60,n/o,1,20);return t.position.z=10,t}function $(){return new W}function ee(n,o,t){const e=new Y({antialias:!0});return e.setPixelRatio(window.devicePixelRatio),e.setSize(n,o),t&&(e.shadowMap.enabled=!0),e.shadowMap.type=F,e}const te=[[2,3],[5,10]];async function ne(n,o,t=1,e=!0){const[s,r]=te[t],[a,c]=[Math.ceil(o/140),Math.ceil(n/130)],l=a>s?s:a,m=c>r?r:c,f=l*m,z=(m-1)/2,k=(l-1.8)/2,_=(await new N().loadAsync("/items/hello/kitty.glb")).scene.children[0],R=new g().makeRotationY(Math.PI/2).multiply(new g().makeScale(.03,.03,.03));_.geometry.applyMatrix4(R);const{geometry:A}=_,E=new T({shininess:100}),d=new V(A,E,f);e&&(d.castShadow=!0,d.receiveShadow=!0);const x=new g,v=[16609939,12976143,16711422,6281941].map(u=>new X(u));let h=0;for(let u=0;u<l;u++)for(let M=0;M<m;M++){const S=Math.random(),G=v[Math.floor(S*v.length)],B=S-.5;d.setColorAt(h,G),x.setPosition(2.5*(z-M),3*(k-u),B),d.setMatrixAt(h,x),h++}return d}const y=2;let C,L,p,i;function P(n){const o=C*n.clientX-1,t=L*n.clientY+1,e=new q(o,t,y);e.unproject(p);const s=e.sub(p.position).normalize(),r=-p.position.z/s.z,a=p.position.clone().add(s.multiplyScalar(r));i.position.set(a.x,a.y,y)}function oe(n,o,t,e){C=2/n,L=-2/o,p=t;const s=new j(.1),r=new D({emissive:16777215}),a=new H(s,r);return i=new K(16777215,1,20,2),i.position.set(0,0,y),e&&(i.castShadow=!0),i.add(a),window.addEventListener("pointermove",P),i}function se(){window.removeEventListener("pointermove",P)}let w;async function ae(n,o,t){const[e,s]=[window.innerWidth,window.innerHeight];w=ee(e,s,t);const r=w.domElement,a=Z(e,s),c=$(),l=oe(e,s,a,t),m=await ne(e,s,o,t);c.add(l,m);function f(){w.render(c,a)}w.setAnimationLoop(f),n.appendChild(r)}function re(){w.setAnimationLoop(null),se()}const de=O({__name:"index",setup(n){return(o,t)=>{const e=J;return Q(),U(e,{start:b(ae),stop:b(re),style:{cursor:"none"}},null,8,["start","stop"])}}});export{de as default};
